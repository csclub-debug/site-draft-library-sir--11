backend:
  name: git-gateway
  branch: main
  repo: csclub-debug/site-draft-library-sir--11

media_folder: "images/uploads"
public_folder: "/images/uploads"

collections:
  # 1) MAIN SITE DATA (content/data.json)
  - name: "site_data"
    label: "Main Site Data"
    files:
      - file: "content/data.json"
        label: "Main content (data.json)"
        name: "data"
        editor:
          preview: false
        fields:
          - label: "Announcements"
            name: "announcements"
            widget: "list"
            summary: "{{fields.title}} ({{fields.date}})"
            fields:
              - { label: "Title", name: "title", widget: "string" }
              - { label: "Date", name: "date", widget: "datetime", required: true }
              - { label: "Body / Note", name: "body", widget: "text", required: true }

          - label: "Staff Members"
            name: "staff"
            widget: "list"
            summary: "{{fields.name}} - {{fields.role}}"
            fields:
              - { label: "Name", name: "name", widget: "string" }
              - { label: "Role", name: "role", widget: "string" }
              - { label: "Image", name: "image", widget: "image", required: false }
              - { label: "Email", name: "email", widget: "string", required: false }
              - { label: "Phone", name: "phone", widget: "string", required: false }

          - label: "Books (Highlights)"
            name: "books"
            widget: "list"
            collapsed: true
            fields:
              - { label: "Title", name: "title", widget: "string" }
              - { label: "Author", name: "author", widget: "string", required: false }
              - { label: "Category", name: "category", widget: "string", required: false }
              - { label: "Year", name: "year", widget: "string", required: false }

          - label: "E-Resources"
            name: "eresources"
            widget: "list"
            collapsed: true
            fields:
              - { label: "Title", name: "title", widget: "string" }
              - { label: "Link", name: "link", widget: "string" }
              - { label: "Description", name: "description", widget: "text", required: false }

          - label: "Research Sites & AI Tools"
            name: "research_sites"
            widget: "list"
            collapsed: true
            summary: "{{fields.name}}"
            fields:
              - { label: "Site Name", name: "name", widget: "string" }
              - { label: "Tagline / Description", name: "tagline", widget: "string" }
              - { label: "External URL", name: "link", widget: "string", hint: "Must start with http:// or https://" }

          - label: "Footer & Social Media"
            name: "footer"
            widget: "object"
            fields:
              - { label: "Primary Email", name: "primary_email", widget: "string", required: false }
              - { label: "Facebook URL", name: "facebook_url", widget: "string", required: false }
              - { label: "Instagram URL", name: "instagram_url", widget: "string", required: false }
              - { label: "Twitter URL", name: "twitter_url", widget: "string", required: false }

  # 2) QUESTION PAPERS (content/qpapers.json) - FIXED
  - name: "qpapers"
    label: "Question Papers"
    files:
      - file: "content/qpapers.json"
        label: "Question Papers Data"
        name: "qpapers"
        format: "json"
        editor:
          preview: false
        fields:
          - label: "Departments"
            name: "departments"
            widget: "list"
            label_singular: "Department"
            summary: "{{fields.department}}"
            fields:
              - label: "Department Name"
                name: "department"
                widget: "string"
                pattern: 
                  - "^[A-Za-z0-9 .&()-]+$"
                  - "Department name can only contain letters, numbers, spaces, and .&()- characters"

              - { label: "Tagline", name: "tagline", widget: "string", required: false, hint: "Short description for this department's papers." }

              - label: "Papers"
                name: "papers"
                widget: "list"
                label_singular: "Paper"
                summary: "{{fields.title}} ({{fields.tag}})"
                fields:
                  - { label: "Paper Title", name: "title", widget: "string", required: true }
                  - { label: "Tag / Semester / Year", name: "tag", widget: "string", required: false }
                  - { label: "PDF Link", name: "link", widget: "string", required: true }

  # 3) BOOK CATALOG (content/books.json)
  - name: "catalog"
    label: "Book Catalog (OPAC)"
    files:
      - file: "content/books.json"
        label: "Book Records"
        name: "books_list"
        format: "json"
        fields:
          - name: "books"
            label: "Book Records"
            label_singular: "Book Record"
            widget: "list"
            collapsed: true
            summary: "{{fields.accession_no}} - {{fields.title}}"
            fields:
              - { label: "Accession Number", name: "accession_no", widget: "string" }
              - { label: "Title", name: "title", widget: "string" }
              - { label: "Author", name: "author", widget: "string" }
              - { label: "Subject / Department", name: "subject", widget: "string", required: false }
              - { label: "ISBN", name: "isbn", widget: "string", required: false }
              - { label: "Publisher", name: "publisher", widget: "string", required: false }