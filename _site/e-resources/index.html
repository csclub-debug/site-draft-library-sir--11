<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>E-Resources - Sir M V Library</title>
    <link rel="stylesheet" href="assets/style.css">
    <style>
        /* CSS for the E-Resources Grid and Cards */

        /* 1. Container Grid for Responsiveness */
        .eresources-grid {
            display: grid;
            /* Adjust columns based on screen size: min 300px wide, max 1fr per column */
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px; /* Spacing between cards */
            padding: 20px 0;
        }

        /* 2. Styling for Individual Resource Card (Anchor tag) */
        .resource-card {
            display: block; /* Ensure the whole card is clickable */
            background: #ffffff;
            border: 1px solid var(--border-color, #e0e0e0);
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
            transition: transform 0.2s, box-shadow 0.2s;
            text-decoration: none; /* Remove underline from the link */
        }

        .resource-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
        }

        .resource-card strong {
            font-size: 1.15rem;
            color: var(--dark, #333);
            display: block;
            margin-bottom: 5px;
        }

        .resource-card p {
            margin: 0 0 10px 0;
            line-height: 1.5;
            font-size: 0.95rem;
        }
        
        /* 3. Loading/Error Message Styling */
        .loading-message {
            text-align: center;
            padding: 40px;
            color: var(--muted);
            grid-column: 1 / -1; /* Ensure message spans all columns */
        }

        /* Optional: Cleanup for the 'acc-items' class in the HTML */
        /* Since we replaced it with a grid, we ensure it has no conflicting styles */
        .acc-items {
            /* We will let .eresources-grid handle the layout */
            display: contents; 
        }

    </style>
</head>
<body>
<div class="navbar-wrap">
    <div class="navbar" role="navigation" aria-label="Main">
        <div class="brand"><img class="logo" src="logo.svg" alt="logo"><div><div class="title">Sir M V Science College</div><div style="font-size:12px;color:var(--muted)">Library & Informatics Centre</div></div></div>
        <button class="hamburger" aria-label="Open menu">☰</button>
        <div class="nav" role="menubar">
            <a href="index.html">Home</a>
            <a href="about.html">About</a>
            <a href="question-papers.html">Question Papers</a>
            <a href="staff.html">Staff</a>
            <a href="announcements.html">Announcements</a>
            <a href="contact.html">Contact</a>
        </div>
    </div>
</div>
<div class="drawer-backdrop" aria-hidden="true"></div>
<div class="drawer" aria-hidden="true">
    <div class="drawer-menu">
        <a href="index.html">Home</a>
        <a href="about.html">About</a>
        <a href="question-papers.html">Question Papers</a>
        <a href="staff.html">Staff</a>
        <a href="announcements.html">Announcements</a>
        <a href="contact.html">Contact</a>
        <div style="margin-top:12px"><a class="email-btn" href="mailto:sirmvsciencebdvt@gmail.com">Email: sirmvsciencebdvt@gmail.com</a></div>
    </div>
</div>
<div class="header-spacer"></div>

<section class="section container">
    <h1 style="margin-top:0">E-Resources</h1>
    
    <div id="eresources-list" class="eresources-grid">
        <div class="loading-message">Loading E-Resources...</div>
    </div>
</section>

<div class="footer-pad"></div>

<footer class="site-footer" role="contentinfo">
    <div class="inner">
        <div style="display:flex;gap:12px;align-items:center">
            <img src="logo.svg" alt="logo" style="height:44px;width:44px;border-radius:8px">
            <div>
                <div style="font-weight:700">Sir M V Science College Library</div>
                <div style="font-size:13px;color:#9aa4b2">Library & Informatics Centre</div>
            </div>
        </div>

        <div style="color:#9aa4b2;font-size:14px">Sir. M.V. Government Science College, Bommanakatte, Bhadravathi - 577302</div>

        <div style="display:flex;gap:12px;align-items:center">
            <a class="social-btn fb" href="#" target="_blank" aria-label="Facebook">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M22 12.07C22 6.48 17.52 2 11.93 2S2 6.48 2 12.07C2 17.09 5.64 21.26 10.36 22v-7.02H7.9v-2.92h2.46v-2.22c0-2.44 1.46-3.79 3.6-3.79 1.04 0 2.12.18 2.12.18v2.33h-1.19c-1.17 0-1.54.73-1.54 1.48v1.98h2.62l-.42 2.92h-2.2V22C18.36 21.26 22 17.09 22 12.07z" fill="white"/></svg>
            </a>

            <a class="social-btn ig" href="#" target="_blank" aria-label="Instagram">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M7 2h10a5 5 0 015 5v10a5 5 0 01-5 5H7a5 5 0 01-5-5V7a5 5 0 015-5zm5 6.5a4.5 4.5 0 100 9 4.5 4.5 0 000-9zm6.5-.5a1 1 0 11-2 0 1 1 0 012 0z" fill="white"/></svg>
            </a>

            <a class="social-btn tw" href="#" target="_blank" aria-label="Twitter">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M22 5.92c-.63.28-1.3.47-2.01.56.72-.43 1.27-1.12 1.53-1.94-.68.4-1.43.7-2.23.86A3.49 3.49 0 0016.5 4c-1.93 0-3.5 1.6-3.5 3.57 0 .28.03.55.09.81-2.91-.15-5.49-1.58-7.21-3.75-.3.5-.47 1.08-.47 1.69 0 1.16.61 2.19 1.54 2.79-.56-.02-1.09-.18-1.55-.42v.04c0 1.64 1.15 3.01 2.67 3.33-.28.07-.58.11-.88.11-.21 0-.42-.02-.62-.06.42 1.31 1.66 2.26 3.13 2.29A6.98 6.98 0 012 19.54a9.8 9.8 0 005.29 1.56c6.35 0 9.83-5.6 9.83-10.46v-.48c.68-.5 1.27-1.12 1.74-1.83-.63.28-1.3.47-2.01.56z" fill="white"/></svg>
            </a>

            <a class="email-btn" href="mailto:sirmvsciencebdvt@gmail.com" aria-label="Email">Email Us</a>
        </div>
    </div>
</footer>

<script src="assets/main.js"></script>
<script>
document.addEventListener('DOMContentLoaded', () => {
    // 1. Target the element (using the ID from the HTML)
    const container = document.getElementById('eresources-list');
    const jsonPath = 'content/data.json'; 

    if (!container) return; 

    // 2. Function to generate and render the resource cards
    const renderResources = (resources) => {
        container.innerHTML = ''; // Clear loading message

        if (resources.length === 0) {
            container.innerHTML = '<div class="loading-message">No E-Resources have been added yet.</div>';
            return;
        }

        resources.forEach(item => {
            const resourceLink = document.createElement('a');
            // Use the new class we defined in the <style> block
            resourceLink.classList.add('resource-card'); 
            
            // Set required link attributes
            resourceLink.setAttribute('href', item.link || '#'); 
            resourceLink.setAttribute('target', '_blank'); 
            resourceLink.setAttribute('rel', 'noopener noreferrer');

            let descriptionHTML = '';
            // Only add description if it exists
            if (item.description && item.description.trim() !== '') {
                descriptionHTML = `<p class="qp-card-tagline" style="margin-top:8px">${item.description}</p>`;
            }

            resourceLink.innerHTML = `
                <strong>${item.title || 'Untitled Resource'}</strong>
                ${descriptionHTML}
                <small style="color: var(--primary); margin-top: 5px; display: block; font-weight: 600;">Click to Visit →</small>
            `;
            
            container.appendChild(resourceLink);
        });
    };

    // 3. Fetch Data from content/data.json
    fetch(jsonPath)
        .then(response => {
            if (!response.ok) {
                throw new Error(`HTTP error! Status: ${response.status}`);
            }
            return response.json();
        })
        .then(data => {
            // CRITICAL STEP: Access the 'eresources' key within the data object
            const resources = data.eresources || [];
            renderResources(resources);
        })
        .catch(e => {
            console.error('Error fetching E-Resources:', e);
            container.innerHTML = '<div class="loading-message" style="color: red;">Failed to load E-Resources. Check console for details.</div>';
        });

});
</script>
</body>
</html>